---
layout: post
title: 从单体事务到分布式事务
tags: Java
---

**事务**将多个读写操作捆绑在一起成为一个逻辑单元。这个逻辑单元中包括多条`SQL`语句，这些语句执行时要么一起成功，要么一起失败。

**事务案例：**

没有事务：在支付过程中，某一时间节点发生了异常，之前执行的“扣除用户余额”操作是不会回滚的，而“扣减库存”操作却没有执行。这会造成数据不一致的问题。（说明：这里的用户余额和库存在同一个数据库）

![](../img/2021-1-8/tx/1.png)

有事务：在支付过程中，某一时间节点发生了异常，之前执行的“扣除用户余额”操作会回滚，保持数据一致。（说明：这里的用户余额和库存在同一个数据库）

![](../img/2021-1-8/tx/2.png)